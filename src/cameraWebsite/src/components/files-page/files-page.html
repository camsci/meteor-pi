<form class="form-horizontal">

    <div class="form-group">
        <label for="after" class="control-label col-xs-2">After (date and time)</label>

        <div class="col-xs-10">
            <input class="form-control" data-bind="kendoDateTimePicker: { value: search.after }" id="after"/>
        </div>
    </div>

    <div class="form-group">
        <label for="before" class="control-label col-xs-2">Before (date and time)</label>

        <div class="col-xs-10">
            <input class="form-control" data-bind="kendoDateTimePicker: { value: search.before }" id="before"/>
        </div>
    </div>

    <div class="form-group">
        <label for="after_offset" class="control-label col-xs-2">After (time)</label>

        <div class="col-xs-10">
            <input class="form-control"
                   data-bind="kendoTimePicker: { value: afterOffsetDate, min: minTime, max: maxTime, interval: 15}"
                   id="after_offset"/>
        </div>
    </div>

    <div class="form-group">
        <label for="before_offset" class="control-label col-xs-2">Before (time)</label>

        <div class="col-xs-10">
            <input class="form-control"
                   data-bind="kendoTimePicker: { value: beforeOffsetDate, min: minTime, max: maxTime, interval: 15}"
                   id="before_offset"/>
        </div>
    </div>

    <div class="form-group">
        <div class="col-xs-offset-2 col-xs-10">
            <div class="checkbox">
                <label><input type="checkbox" data-bind="checked: search.exclude_events">Exclude events?</label>
            </div>
        </div>
    </div>

    <div class="form-group">
        <div class="col-xs-offset-2 col-xs-10">
            <button type="submit" class="btn btn-default btn-info" data-bind="click: searchFiles">Search</button>
        </div>
    </div>

</form>

<table data-bind="if: results().length>0" class="table table-condensed">
    <thead>
    <tr>
        <th>Camera ID</th>
        <th>File Time</th>
        <th>MIME Type</th>
        <th>Semantic Type</th>
        <th>ID (click to download)</th>
    </tr>
    </thead>
    <tbody data-bind="foreach: results">
    <tr>
        <td data-bind="text: camera_id"></td>
        <td data-bind="text: new Date(file_time*1000)"></td>
        <td data-bind="text: mime_type"></td>
        <td data-bind="text: semantic_type"></td>
        <td><a data-bind="text: $parent.filenameForFile($data), attr : {href : $parent.urlForFile($data)}"></a>
            <table class="table table-condensed">
                <thead>
                <tr>
                    <th>Meta Key</th>
                    <th>Meta Value</th>
                </tr>
                </thead>
                <tbody data-bind="foreach: meta">
                <tr>
                    <td data-bind="text: key"></td>
                    <td data-bind="text: type==='date'?new Date(value*1000):value"></td>
                </tr>
                </tbody>
            </table>
        </td>
    </tr>
    </tbody>
</table>
